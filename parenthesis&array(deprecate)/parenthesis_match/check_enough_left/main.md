# type 1: got early return
for p in s:
    if p == left:
        stack.append()
    else:
        if len(stack) == 0 or matched;
            early return
    
        do other things 


# type 2: without early return
for p in s:
    if p == left:
        stack.append()
    else:
        if len(stack) > 0 and matched;
            do sth
        else # stack is empty, or not matched
            do sth else